/* script.js - Interatividade: hamburger, carousel rotate, form handling, smooth scroll, accessibility */ (function () { // DOM ready document.addEventListener('DOMContentLoaded', function () { // Elements const hamburger = document.getElementById('hamburger'); const nav = document.getElementById('mainNav'); const servicesCarousel = document.getElementById('servicesCarousel'); const form = document.getElementById('contactForm'); const formMsg = document.getElementById('formMsg'); const yearEl = document.getElementById('year'); // set year if (yearEl) yearEl.textContent = new Date().getFullYear(); // Hamburger menu (mobile) if (hamburger && nav) { hamburger.addEventListener('click', function () { const expanded = this.getAttribute('aria-expanded') === 'true'; this.setAttribute('aria-expanded', String(!expanded)); // Toggle class this.classList.toggle('is-active'); // Toggle nav visibility if (getComputedStyle(nav).display === 'none' || window.innerWidth <= 800) { nav.style.display = nav.style.display === 'flex' ? '' : 'flex'; if (nav.style.display === 'flex') { nav.style.position = 'absolute'; nav.style.top = '64px'; nav.style.right = '12px'; nav.style.flexDirection = 'column'; nav.style.background = 'white'; nav.style.padding = '10px'; nav.style.borderRadius = '12px'; nav.style.boxShadow = '0 12px 30px rgba(15,23,42,0.08)'; nav.style.zIndex = '70'; } else { nav.style.position = ''; nav.style.top = ''; nav.style.right = ''; nav.style.flexDirection = ''; nav.style.padding = ''; nav.style.background = ''; nav.style.boxShadow = ''; } } }); // close nav on link click (mobile) nav.querySelectorAll('a').forEach(a => { a.addEventListener('click', () => { if (window.innerWidth <= 800) { nav.style.display = ''; hamburger.setAttribute('aria-expanded', 'false'); hamburger.classList.remove('is-active'); } }); }); } // Smooth scroll for internal links document.querySelectorAll('a[href^="#"]').forEach(anchor => { anchor.addEventListener('click', function (e) { const href = this.getAttribute('href'); if (href.length > 1) { e.preventDefault(); const target = document.querySelector(href); if (target) { target.scrollIntoView({ behavior: 'smooth', block: 'start' }); // close mobile menu if open if (window.innerWidth <= 800 && nav) { nav.style.display = ''; if (hamburger) { hamburger.setAttribute('aria-expanded', 'false'); hamburger.classList.remove('is-active'); } } } } }); }); // Services rotate/auto-scroll for desktop let rotateInterval; function startRotate() { stopRotate(); if (!servicesCarousel) return; if (window.innerWidth > 800) { rotateInterval = setInterval(() => { const first = servicesCarousel.querySelector('.service-card:first-child'); if (first) servicesCarousel.appendChild(first); }, 3500); } } function stopRotate() { if (rotateInterval) clearInterval(rotateInterval); } window.addEventListener('resize', startRotate); startRotate(); // Form handling - simulate send and prepare WhatsApp quick message if (form) { form.addEventListener('submit', function (e) { e.preventDefault(); const data = new FormData(form); const values = Object.fromEntries(data.entries()); // Validation minimal if (!values.name || !values.phone || !values.service) { formMsg.textContent = 'Por favor, preencha nome, telefone e serviço.'; formMsg.style.color = 'crimson'; return; } // Build WhatsApp message text (encoded) const phoneClean = values.phone.replace(/\D/g, ''); const waNumber = '5511999999999'; // <- troque para o seu número real const msg = `Olá, meu nome é ${values.name}. Gostaria de orçamento para: ${values.service}. Detalhes: ${values.message || '-'} Telefone: ${values.phone}`; const waHref = `https://wa.me/${waNumber}?text=${encodeURIComponent(msg)}`; // Provide feedback and open WhatsApp in new tab formMsg.textContent = 'Redirecionando para o WhatsApp...'; formMsg.style.color = ''; // small delay to show message, then open setTimeout(() => { window.open(waHref, '_blank', 'noopener'); form.reset(); formMsg.textContent = 'Mensagem iniciada no WhatsApp.'; setTimeout(() => formMsg.textContent = '', 6000); }, 700); }); } // Accessibility: show focus outlines when using keyboard document.body.addEventListener('keyup', (e) => { if (e.key === 'Tab') document.documentElement.classList.add('show-focus'); }); // Touch devices: gentle hint to use WhatsApp button let touchHintTimer = setTimeout(() => { const wa = document.getElementById('whatsappFloat'); if (wa) { wa.animate([{ transform: 'translateY(0)' }, { transform: 'translateY(-8px)' }, { transform: 'translateY(0)' }], { duration: 900, iterations: 2 }); } }, 2500); // Stop rotate on hover (desktop) if (servicesCarousel) { servicesCarousel.addEventListener('mouseenter', stopRotate); servicesCarousel.addEventListener('mouseleave', startRotate); } // Clean up on unload window.addEventListener('beforeunload', () => { stopRotate(); clearTimeout(touchHintTimer); }); }); })();